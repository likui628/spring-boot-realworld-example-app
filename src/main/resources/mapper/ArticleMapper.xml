<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.realworld.mapper.ArticleMapper">

    <insert id="insert">
        insert into articles(id, slug, title, description, body, user_id, created_at, updated_at)
        values (#{article.id},
                #{article.slug},
                #{article.title},
                #{article.description},
                #{article.body},
                #{article.userId},
                #{article.createdAt},
                #{article.updatedAt})
    </insert>

    <insert id="insertTag">
        insert into tags(id, name)
        values (#{tag.id},
                #{tag.name})
    </insert>

    <insert id="insertArticleTagRelation">
        insert into article_tags(article_id, tag_id)
        values (#{articleId}, #{tagId})
    </insert>

    <select id="findTag" resultType="com.example.realworld.domain.entity.TagEntity">
        select id, name
        from tags
        where name = #{name}
    </select>
</mapper>